<!DOCTYPE html>
<html 
	lang="zh-CN">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		
<link rel="stylesheet" href="/css/layout.css">

		
		<title> è¿åŠ¨å­¦æ¨¡å‹çš„å‰å‘é€’æ¨-IDMä¸è‡ªè¡Œè½¦ -  KKç©ºé—´</title>
		<!-- <link rel="stylesheet" href="https://unpkg.com/mdui@1.0.2/dist/css/mdui.min.css" /> -->
		<!-- <script src="https://unpkg.com/mdui@1.0.2/dist/js/mdui.min.js"></script> -->
		
<link rel="stylesheet" href="/lib/mdui/mdui.min.css">

		
<script src="/lib/mdui/mdui.min.js"></script>

		<!-- lazyload -->
		
<script src="/lib/lazysizes.js"></script>

		<!-- smooth-scrolling -->
		
<script src="/lib/smooth-scrolling.js"></script>

		<!-- highlight -->
		
<link rel="stylesheet" href="/lib/highlight/atom-one-dark.min.css">

		
<script src="/lib/highlight/highlight.min.js"></script>

		<!-- é¢„ç½® kiraicon -->
		
<link rel="stylesheet" href="/lib/iconfont/iconfont.css">

		
		<link
			rel="shortcut icon"
			href="/image/fa.jpeg"
			type="image/jpeg"
		/>
		
<link rel="stylesheet" href="/deps/css/APlayer.min.css">

		
		
<script src="/deps/js/APlayer.min.js"></script>
<script src="/deps/js/Meting.min.js"></script>

	<!-- hexo injector head_end start -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$']],
          displayMath: [['$$', '$$']],
          processEscapes: true
        }
      };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
    <!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>

	<body>
		<div
			class="kira-background"
			style="background-image: url('/image/frieren.png')"
		></div>
		<div class="kira-header">
    <a
        class="kira-drawer-button mdui-ripple"
        title="å¯¼èˆªæ "
        onclick="document.querySelector('.kira-sidebar-modal').classList.add('show');document.querySelector('.kira-sidebar#sidebar').classList.add('show');"
    >
        <i class="kirafont icon-menu"></i>
    </a>
    <a href="/" title="KKç©ºé—´">
        <img
			src="/image/chongye.png"
			alt="æˆ˜æ–—åŒ…å­"
		/>
    </a>
</div>
		<div class="kira-body">
			<div class="kira-sidebar" id="sidebar">
	<div class="kira-avatar mdui-ripple">
		<a href="/image/chongye.png" title="æˆ˜æ–—åŒ…å­">
			<img
				src="/image/chongye.png"
				alt="æˆ˜æ–—åŒ…å­"
			/>
		</a>
	</div>
	<div class="kira-count">
		<div><span>æ–‡ç« </span>123</div>
		<div><span>æ ‡ç­¾</span>7</div>
		<div><span>åˆ†ç±»</span>5</div>
	</div>
	<div class="kira-list">
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/"
			title="å›åˆ°é¦–é¡µ"
		>
			<i
				class="kirafont
					
						icon-home
					"
			></i>
			<div class="kira-list-item-content">
				å›åˆ°é¦–é¡µ
			</div>
		</a>
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/archive.html"
			title="æ–‡ç« å½’æ¡£"
		>
			<i
				class="kirafont
					
						icon-container
					"
			></i>
			<div class="kira-list-item-content">
				æ–‡ç« å½’æ¡£
			</div>
		</a>
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/about.html"
			title="å…³äºæœ¬äºº"
		>
			<i
				class="kirafont
					
						icon-user
					"
			></i>
			<div class="kira-list-item-content">
				å…³äºæœ¬äºº
			</div>
		</a>
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/friends.html"
			title="æˆ‘çš„æœ‹å‹"
		>
			<i
				class="kirafont
					
						icon-team
					"
			></i>
			<div class="kira-list-item-content">
				æˆ‘çš„æœ‹å‹
			</div>
		</a>
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/todolist.html"
			title="æˆ‘çš„Todo"
		>
			<i
				class="kirafont
					
						icon-container-fill
					"
			></i>
			<div class="kira-list-item-content">
				æˆ‘çš„Todo
			</div>
		</a>
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/liferecords"
			title="ç©äº†ä»€ä¹ˆ"
		>
			<i
				class="kirafont
					
						icon-fullscreen
					"
			></i>
			<div class="kira-list-item-content">
				ç©äº†ä»€ä¹ˆ
			</div>
		</a>
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/game_graph.html"
			title="å°å›¾"
		>
			<i
				class="kirafont
					
						icon-fullscreen
					"
			></i>
			<div class="kira-list-item-content">
				å°å›¾
			</div>
		</a>
		
	</div>
	<aside id="kira-sidebar">
		
			<div class="kira-widget-wrap">
	<div class="kira-widget kira-social">
		
			<a
				class="mdui-ripple"
				href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=1040035659&website=www.oicqzone.com"
				target="_blank"
				mdui-tooltip="{content: 'QQ'}"
				style="color: rgb(49, 174, 255); background-color: rgba(49, 174, 255, .1);"
			>
				<i
					class="kirafont
					
						icon-QQ
					"
				></i>
			</a>
		
			<a
				class="mdui-ripple"
				href="https://space.bilibili.com/6456506"
				target="_blank"
				mdui-tooltip="{content: 'å“”å“©å“”å“©'}"
				style="color: rgb(231, 106, 141); background-color: rgba(231, 106, 141, .15);"
			>
				<i
					class="kirafont
					
						icon-bilibili
					"
				></i>
			</a>
		
			<a
				class="mdui-ripple"
				href="https://github.com/PaiPai121/"
				target="_blank"
				mdui-tooltip="{content: 'GitHub'}"
				style="color: rgb(25, 23, 23); background-color: rgba(25, 23, 23, .15);"
			>
				<i
					class="kirafont
					
						icon-github
					"
				></i>
			</a>
		
			<a
				class="mdui-ripple"
				href="https://gitee.com/<ä½ çš„gitee id>"
				target="_blank"
				mdui-tooltip="{content: 'Gitee'}"
				style="color: rgb(165, 15, 15); background-color: rgba(165, 15, 15, .15);"
			>
				<i
					class="kirafont
					
						icon-gitee
					"
				></i>
			</a>
		
	</div>
</div>

		
			
  <div class="kira-widget-wrap">
    <h3 class="kira-widget-title">åˆ†ç±»</h3>
    <div class="kira-widget">
      <ul class="category-list">
        
        

        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/ä¸šä½™å¼€å‘/">
              ä¸šä½™å¼€å‘
            </a>
            <span class="category-list-count">12</span>
          </li>
        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/å­¦ä¹ /">
              å­¦ä¹ 
            </a>
            <span class="category-list-count">25</span>
          </li>
        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/å·¥ä½œä½“éªŒ/">
              å·¥ä½œä½“éªŒ
            </a>
            <span class="category-list-count">47</span>
          </li>
        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/æ—¥å¸¸ç”Ÿæ´»/">
              æ—¥å¸¸ç”Ÿæ´»
            </a>
            <span class="category-list-count">25</span>
          </li>
        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/æ¸¸æˆè¯„æµ‹/">
              æ¸¸æˆè¯„æµ‹
            </a>
            <span class="category-list-count">14</span>
          </li>
        
      </ul>
    </div>
  </div>

		
			
	<div class="kira-widget-wrap">
		<div id="randomtagcloud" class="kira-widget tagcloud kira-rainbow">
			<a href="/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/" style="font-size: 14px;">æŠ€æœ¯å­¦ä¹ </a> <a href="/tags/%E6%B8%B8%E6%88%8F%E4%B8%9A%E4%BD%99%E5%BC%80%E5%8F%91/" style="font-size: 18px;">æ¸¸æˆä¸šä½™å¼€å‘</a> <a href="/tags/%E6%B8%B8%E6%88%8F%E8%AF%84%E6%B5%8B/" style="font-size: 16px;">æ¸¸æˆè¯„æµ‹</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/" style="font-size: 10px;">ç”Ÿæ´»æ„Ÿæ‚Ÿ</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/" style="font-size: 12px;">ç”Ÿæ´»è®°å½•</a> <a href="/tags/%E8%81%8C%E5%9C%BA%E7%BB%8F%E9%AA%8C/" style="font-size: 20px;">èŒåœºç»éªŒ</a> <a href="/tags/%E8%A1%8C%E4%B8%9A%E8%A7%82%E5%AF%9F/" style="font-size: 20px;">è¡Œä¸šè§‚å¯Ÿ</a>
		</div>
		
	</div>


		
			
	<div class="kira-widget-wrap">
		<h3 class="kira-widget-title">
			æ–‡ç« å½’æ¡£
		</h3>
		<div class="kira-widget">
			<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2026/">2026</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/">2025</a><span class="archive-list-count">62</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/">2024</a><span class="archive-list-count">28</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/">2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021</a><span class="archive-list-count">13</span></li></ul>
		</div>
	</div>


		
	</aside>
	<div class="kira-copyright">
		&copy; 2026
		<a href="/">æˆ˜æ–—åŒ…å­</a>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> &
		<a href="https://github.com/ch1ny/kira-hexo/" target="_blank">Kira-Hexo</a>
		<br />
		
		
	</div>
</div>
<div
	class="kira-sidebar-modal"
	id="sidebar-modal"
	onclick="(function(self) {
		self.classList.remove('show');
		document.querySelector('.kira-sidebar.show#sidebar').classList.remove('show');
	})(this)"
></div>
			<div class="kira-content">
				<div id="kira-top-header"></div>
				<div class="kira-main-content">
					
<link rel="stylesheet" href="/css/kira-image.css">


<script src="/js/kira-image.js"></script>

<div class="kira-image">
    <div class="kira-image-modal">
        <div class="kira-image-header">
            <div class="kira-image-counter"></div>
            <div class="kira-image-title"></div>
            <div class="kira-image-operation">
                <div class="kira-image-operation-button" id="kira-image-operation-button-zoom">
                    <i class="kirafont icon-zoom-in"></i>
                </div>
                <div class="kira-image-operation-button" id="kira-image-operation-button-close">
                    <i class="kirafont icon-close"></i>
                </div>
            </div>
        </div>
        <div class="kira-image-container">
            <div class="kira-image-prev-button-panel">
                <div class="kira-image-exchange-button">
                    <i class="kirafont icon-left"></i>
                </div>
            </div>
            <div class="kira-image-list">
                <div class="kira-image-prev">
                    <img />
                </div>
                <div class="kira-image-now">
                    <img />
                </div>
                <div class="kira-image-next">
                    <img />
                </div>
            </div>
            <div class="kira-image-next-button-panel">
                <div class="kira-image-exchange-button">
                    <i class="kirafont icon-right"></i>
                </div>
            </div>
        </div>
    </div>
</div>

	
<link rel="stylesheet" href="/css/kira-code-copy.css">

	
<script src="/js/kira-code-copy.js"></script>


<div class="kira-post">
	<article>
		
		<div class="kira-post-cover">
			<img
				data-src="/image/kmetsu.png"
				data-sizes="auto"
				alt="è¿åŠ¨å­¦æ¨¡å‹çš„å‰å‘é€’æ¨-IDMä¸è‡ªè¡Œè½¦"
				class="lazyload kira-post-cover-image disabled-kira-image"
			/>
			<h1>è¿åŠ¨å­¦æ¨¡å‹çš„å‰å‘é€’æ¨-IDMä¸è‡ªè¡Œè½¦</h1>
		</div>
		
		<div class="kira-post-meta kira-rainbow" style="margin:10px 0!important;">
			<a><i class="kirafont icon-calendar-fill"></i>2025å¹´11æœˆ18æ—¥</a>
			<a><i class="kirafont icon-edit-fill"></i>3.5k å­—</a>
			<a><i class="kirafont icon-time-circle-fill"></i>å¤§æ¦‚ 17 åˆ†é’Ÿ</a>
		</div>
		<!-- toc --><html><head></head><body><ul>
<li><a href="#%E6%99%BA%E8%83%BD%E9%A9%BE%E9%A9%B6%E5%91%98%E6%A8%A1%E5%9E%8Bintelligent-driver-model-idm">æ™ºèƒ½é©¾é©¶å‘˜æ¨¡å‹ï¼ˆIntelligent Driver Model, IDMï¼‰</a>
<ul>
<li><a href="#2-%E5%8A%A8%E6%80%81%E6%9C%9F%E6%9C%9B%E5%AE%89%E5%85%A8%E8%B7%9D%E7%A6%BB-s">2. åŠ¨æ€æœŸæœ›å®‰å…¨è·ç¦» $s^*$</a></li>
<li><a href="#3-%E6%A8%A1%E5%9E%8B%E8%BE%93%E5%85%A5%E4%B8%8E%E5%8F%82%E6%95%B0%E5%AE%9A%E4%B9%89">3. æ¨¡å‹è¾“å…¥ä¸å‚æ•°å®šä¹‰</a></li>
</ul>
<ul>
<li><a href="#%E7%AE%80%E6%98%93%E5%AE%9E%E7%8E%B0">ç®€æ˜“å®ç°</a>
<ul>
<li><a href="#%E6%AD%A5%E9%AA%A4-1%E8%AE%A1%E7%AE%97%E7%9B%B8%E5%AF%B9%E9%80%9F%E5%BA%A6">æ­¥éª¤ 1ï¼šè®¡ç®—ç›¸å¯¹é€Ÿåº¦</a></li>
<li><a href="#%E6%AD%A5%E9%AA%A4-2%E8%AE%A1%E7%AE%97%E5%8A%A8%E6%80%81%E6%9C%9F%E6%9C%9B%E5%AE%89%E5%85%A8%E8%B7%9D%E7%A6%BB-s">æ­¥éª¤ 2ï¼šè®¡ç®—åŠ¨æ€æœŸæœ›å®‰å…¨è·ç¦» $s^*$</a></li>
<li><a href="#%E6%AD%A5%E9%AA%A4-3%E8%AE%A1%E7%AE%97-idm-%E5%8A%A0%E9%80%9F%E5%BA%A6-a_textidm">æ­¥éª¤ 3ï¼šè®¡ç®— IDM åŠ é€Ÿåº¦ $a_{\text{IDM}}$</a></li>
<li><a href="#%E6%AD%A5%E9%AA%A4-4%E9%99%90%E5%88%B6%E8%BE%93%E5%87%BA%E5%8A%A0%E9%80%9F%E5%BA%A6">æ­¥éª¤ 4ï¼šé™åˆ¶è¾“å‡ºåŠ é€Ÿåº¦</a></li>
</ul>
</li>
<li><a href="#%E7%A4%BA%E4%BE%8B%E4%BC%AA%E4%BB%A3%E7%A0%81">ç¤ºä¾‹ä¼ªä»£ç </a></li>
</ul>
</li>
<li><a href="#%E8%BF%90%E5%8A%A8%E5%AD%A6%E8%87%AA%E8%A1%8C%E8%BD%A6%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%89%8D%E5%90%91%E4%BB%BF%E7%9C%9F">è¿åŠ¨å­¦è‡ªè¡Œè½¦æ¨¡å‹çš„å‰å‘ä»¿çœŸ</a>
<ul>
<li><a href="#%F0%9F%9A%B2-%E8%BF%90%E5%8A%A8%E5%AD%A6%E8%87%AA%E8%A1%8C%E8%BD%A6%E6%A8%A1%E5%9E%8B-kinematic-bicycle-model">ğŸš² è¿åŠ¨å­¦è‡ªè¡Œè½¦æ¨¡å‹ (Kinematic Bicycle Model)</a></li>
<li><a href="#%E8%BF%90%E5%8A%A8%E5%AD%A6%E6%96%B9%E7%A8%8B">è¿åŠ¨å­¦æ–¹ç¨‹</a>
<ul>
<li><a href="#%E6%AC%A7%E6%8B%89%E6%B3%95%E5%89%8D%E5%90%91%E7%A7%AF%E5%88%86">æ¬§æ‹‰æ³•å‰å‘ç§¯åˆ†</a></li>
<li><a href="#%E5%9B%9B%E9%98%B6%E9%BE%99%E6%A0%BC-%E5%BA%93%E5%A1%94%E6%B3%95rk4%E7%A7%AF%E5%88%86">å››é˜¶é¾™æ ¼-åº“å¡”æ³•ï¼ˆRK4ï¼‰ç§¯åˆ†</a>
<ul>
<li><a href="#%E7%A7%AF%E5%88%86%E6%AD%A5%E9%AA%A4">ç§¯åˆ†æ­¥éª¤</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h1><span id="%E6%99%BA%E8%83%BD%E9%A9%BE%E9%A9%B6%E5%91%98%E6%A8%A1%E5%9E%8Bintelligent-driver-model-idm">æ™ºèƒ½é©¾é©¶å‘˜æ¨¡å‹ï¼ˆIntelligent Driver Model, IDMï¼‰</span></h1>
<p>ğŸš— æ™ºèƒ½é©¾é©¶å‘˜æ¨¡å‹ (IDM) è¯¦è§£IDM çš„æ ¸å¿ƒç›®æ ‡æ˜¯è®¡ç®—è‡ªè½¦çš„æœŸæœ›åŠ é€Ÿåº¦ $a$ï¼Œè¿™ä¸ªåŠ é€Ÿåº¦ $a$ ä¼šåœ¨ä¸¤ä¸ªæç«¯æƒ…å†µä¹‹é—´å–å¾—å¹³è¡¡ï¼š</p>
<p>è‡ªç”±æµé©¾é©¶ï¼ˆFree Drivingï¼‰ï¼š å½“å‰æ–¹æ²¡æœ‰è½¦è¾†æ—¶ï¼Œè½¦è¾†å€¾å‘äºåŠ é€Ÿè‡³å…¶æœŸæœ›é€Ÿåº¦ $v_0$ ã€‚</p>
<p>è·Ÿè½¦é©¾é©¶ï¼ˆCar Followingï¼‰ï¼š å½“ä¸å‰è½¦è·ç¦»è¾ƒè¿‘æ—¶ï¼Œè½¦è¾†å¿…é¡»å‡é€Ÿä»¥ä¿æŒä¸€ä¸ªåŠ¨æ€çš„å®‰å…¨è·ç¦» $s^*$ ã€‚</p>
<p>$$a_{\text{IDM}} = a_{\text{max}} \left[ 1 - \left(\frac{v}{v_0}\right)^\delta - \left(\frac{s^*}{s}\right)^2 \right]$$</p>
<p>å…¬å¼ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<p>â‘  è‡ªç”±æµåŠ é€Ÿåº¦é¡¹ï¼ˆFree-Driving Termï¼‰ï¼š$a_{\text{max}} \left[ 1 - \left(\frac{v}{v_0}\right)^\delta \right]$</p>
<ul>
<li><strong>ç›®çš„ï¼š</strong> æè¿°è½¦è¾†åœ¨æ²¡æœ‰å‰è½¦é˜»ç¢æ—¶ï¼Œå¦‚ä½•åŠ é€Ÿåˆ°å…¶ç›®æ ‡é€Ÿåº¦ $v_0$ ã€‚</li>
<li><strong>è¡Œä¸ºï¼š</strong></li>
<li></li>
</ul>
<p>å½“è‡ªè½¦é€Ÿåº¦ $v$ è¿œå°äºæœŸæœ›é€Ÿåº¦ $v_0$ æ—¶ï¼Œè¯¥é¡¹æ¥è¿‘ $a_{\text{max}}$ï¼ˆæœ€å¤§åŠ é€Ÿåº¦ï¼‰ã€‚</p>
<p>å½“ $v$ æ¥è¿‘ $v_0$ æ—¶ï¼Œè¯¥é¡¹æ¥è¿‘ 0ï¼ŒåŠ é€Ÿåº¦å‡å°ã€‚</p>
<p>å½“ $v$ è¶…è¿‡ $v_0$ æ—¶ï¼Œè¯¥é¡¹å˜ä¸ºè´Ÿå€¼ï¼Œè½¦è¾†å¼€å§‹å‡é€Ÿã€‚</p>
<p>â‘¡ è·Ÿè½¦åˆ¶åŠ¨é¡¹ï¼ˆInteraction/Braking Termï¼‰ï¼š$-a_{\text{max}} \left(\frac{s^*}{s}\right)^2$</p>
<ul>
<li><strong>ç›®çš„ï¼š</strong> æè¿°è½¦è¾†ä¸ºé¿å…ç¢°æ’è€Œå‡é€Ÿçš„è¡Œä¸ºã€‚</li>
<li><strong>è¡Œä¸ºï¼š</strong></li>
</ul>
<p>å½“<strong>å®é™…è·ç¦» $s$</strong> è¿œå¤§äº<strong>æœŸæœ›å®‰å…¨è·ç¦» $s^*$</strong> æ—¶ï¼Œè¯¥é¡¹æ¥è¿‘ 0ï¼Œè·Ÿè½¦å½±å“å¾ˆå°ã€‚</p>
<p>å½“ $s$ æ¥è¿‘ $s^*$ æ—¶ï¼Œè¯¥é¡¹æ€¥å‰§å‡å°ï¼ˆå˜ä¸ºè¾ƒå¤§çš„è´Ÿå€¼ï¼‰ï¼Œäº§ç”Ÿå¼ºå¤§çš„åˆ¶åŠ¨åŠ›ã€‚</p>
<h3><span id="2-%E5%8A%A8%E6%80%81%E6%9C%9F%E6%9C%9B%E5%AE%89%E5%85%A8%E8%B7%9D%E7%A6%BB-s">2. åŠ¨æ€æœŸæœ›å®‰å…¨è·ç¦» $s^*$</span></h3>
<p>åœ¨ IDM ä¸­ï¼Œå®‰å…¨è·ç¦» $s^*$ ä¸æ˜¯ä¸€ä¸ªå›ºå®šå€¼ï¼Œå®ƒä¼šæ ¹æ®è‡ªè½¦é€Ÿåº¦ $v$ å’Œç›¸å¯¹é€Ÿåº¦ $v_{\text{rel}}$ åŠ¨æ€è°ƒæ•´ï¼Œæ˜¯ IDM çš„å…³é”®æ‰€åœ¨ã€‚</p>
<p>$$s^* = s_0 + v T + \frac{v \cdot v_{\text{rel}}}{2 \sqrt{a_{\text{max}} b_{\text{max}}}}$$</p>
<p>å…¶ä¸­ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">ç¬¦å·</th>
<th style="text-align:left">æè¿°</th>
<th style="text-align:left">ç»„æˆéƒ¨åˆ†</th>
<th style="text-align:left">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">$s_0$</td>
<td style="text-align:left"><strong>é™æ­¢å®‰å…¨è·ç¦»</strong></td>
<td style="text-align:left">$s_0$</td>
<td style="text-align:left">è½¦è¾†é™æ­¢æ—¶ä¸å‰è½¦åº”ä¿æŒçš„æœ€å°è·ç¦»ï¼ˆé˜²æ­¢è¿½å°¾ï¼‰ã€‚</td>
</tr>
<tr>
<td style="text-align:left">$v T$</td>
<td style="text-align:left"><strong>é€Ÿåº¦ç›¸å…³è·ç¦»</strong></td>
<td style="text-align:left">$v T$</td>
<td style="text-align:left">ç¡®ä¿åœ¨æœŸæœ›æ—¶è· $T$ å†…ï¼Œå‰è½¦çªç„¶åœè½¦ï¼Œè‡ªè½¦æœ‰æ—¶é—´ååº”å¹¶åˆ¶åŠ¨ã€‚</td>
</tr>
<tr>
<td style="text-align:left">$\frac{v \cdot v_{\text{rel}}}{â€¦}$</td>
<td style="text-align:left"><strong>ç›¸å¯¹é€Ÿåº¦è·ç¦»</strong></td>
<td style="text-align:left">$\frac{v \cdot v_{\text{rel}}}{2 \sqrt{a_{\text{max}} b_{\text{max}}}}$</td>
<td style="text-align:left"><strong>åŠ¨æ€åˆ¶åŠ¨è·ç¦»</strong>ã€‚å¦‚æœ $v_{\text{rel}} &gt; 0$ï¼ˆè‡ªè½¦æ¯”å‰è½¦å¿«ï¼‰ï¼Œéœ€è¦æ›´å¤§çš„å®‰å…¨è·ç¦»æ¥ç¼“å†²åˆ¶åŠ¨ã€‚</td>
</tr>
</tbody>
</table>
<h3><span id="3-%E6%A8%A1%E5%9E%8B%E8%BE%93%E5%85%A5%E4%B8%8E%E5%8F%82%E6%95%B0%E5%AE%9A%E4%B9%89">3. æ¨¡å‹è¾“å…¥ä¸å‚æ•°å®šä¹‰</span></h3>
<p>è¦å®ç° IDMï¼Œéœ€è¦ä»¥ä¸‹<strong>è¾“å…¥ï¼ˆæ¥è‡ªä¼ æ„Ÿå™¨ï¼‰<strong>å’Œ</strong>å‚æ•°ï¼ˆæ¨¡å‹æ ‡å®šï¼‰</strong>ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">ç±»åˆ«</th>
<th style="text-align:left">ç¬¦å·</th>
<th style="text-align:left">å«ä¹‰</th>
<th style="text-align:left">ç¤ºä¾‹å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>è¾“å…¥</strong></td>
<td style="text-align:left">$v$</td>
<td style="text-align:left">è‡ªè½¦å½“å‰é€Ÿåº¦</td>
<td style="text-align:left">$15 \text{ m/s}$</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">$v_{\text{front}}$</td>
<td style="text-align:left">å‰è½¦å½“å‰é€Ÿåº¦</td>
<td style="text-align:left">$13 \text{ m/s}$</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">$s$</td>
<td style="text-align:left">è‡ªè½¦ä¸å‰è½¦çš„å‡€è·</td>
<td style="text-align:left">$20 \text{ m}$</td>
</tr>
<tr>
<td style="text-align:left"><strong>å‚æ•°</strong></td>
<td style="text-align:left">$v_0$</td>
<td style="text-align:left">æœŸæœ›æœ€å¤§é€Ÿåº¦ï¼ˆç›®æ ‡é€Ÿåº¦ï¼‰</td>
<td style="text-align:left">$30 \text{ m/s}$</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">$a_{\text{max}}$</td>
<td style="text-align:left">æœ€å¤§èˆ’é€‚åŠ é€Ÿåº¦</td>
<td style="text-align:left">$1.5 \text{ m/s}^2$</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">$b_{\text{max}}$</td>
<td style="text-align:left">æœ€å¤§èˆ’é€‚å‡é€Ÿåº¦</td>
<td style="text-align:left">$3.0 \text{ m/s}^2$</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">$T$</td>
<td style="text-align:left">æœŸæœ›æ—¶è·ï¼ˆTime Headwayï¼‰</td>
<td style="text-align:left">$1.5 \text{ s}$</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">$s_0$</td>
<td style="text-align:left">é™æ­¢å®‰å…¨è·ç¦»</td>
<td style="text-align:left">$2.0 \text{ m}$</td>
</tr>
</tbody>
</table>
<h2><span id="%E7%AE%80%E6%98%93%E5%AE%9E%E7%8E%B0">ç®€æ˜“å®ç°</span></h2>
<h3><span id="%E6%AD%A5%E9%AA%A4-1%E8%AE%A1%E7%AE%97%E7%9B%B8%E5%AF%B9%E9%80%9F%E5%BA%A6">æ­¥éª¤ 1ï¼šè®¡ç®—ç›¸å¯¹é€Ÿåº¦</span></h3>
<p>$$v_{\text{rel}} = v - v_{\text{front}}$$</p>
<h3><span id="%E6%AD%A5%E9%AA%A4-2%E8%AE%A1%E7%AE%97%E5%8A%A8%E6%80%81%E6%9C%9F%E6%9C%9B%E5%AE%89%E5%85%A8%E8%B7%9D%E7%A6%BB-s">æ­¥éª¤ 2ï¼šè®¡ç®—åŠ¨æ€æœŸæœ›å®‰å…¨è·ç¦» $s^*$</span></h3>
<p>ä½¿ç”¨ $v$, $v_{\text{rel}}$, å’Œæ¨¡å‹å‚æ•°è®¡ç®— $s^*$ ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"># è®¡ç®— sqrt(a_max * b_max)<br>denom = 2 * sqrt(a_max * b_max)<br><br># è®¡ç®—åŠ¨æ€é¡¹ (ç›¸å¯¹é€Ÿåº¦é¡¹)<br>dynamic_term = (v * v_rel) / denom<br><br># è®¡ç®— s*<br>s_star = s0 + v * T + dynamic_term<br></code></pre></td></tr></tbody></table></figure>
<h3><span id="%E6%AD%A5%E9%AA%A4-3%E8%AE%A1%E7%AE%97-idm-%E5%8A%A0%E9%80%9F%E5%BA%A6-a_textidm">æ­¥éª¤ 3ï¼šè®¡ç®— IDM åŠ é€Ÿåº¦ $a_{\text{IDM}}$</span></h3>
<p>å°† $v_0$, $v$, $s$, å’Œ $s^*$ ä»£å…¥ä¸»å…¬å¼ï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"># 1. è‡ªç”±æµé¡¹<br>free_flow_term = 1 - (v / v0)**delta <br><br># 2. è·Ÿè½¦åˆ¶åŠ¨é¡¹<br>braking_term = -(s_star / s)**2<br><br># 3. æœ€ç»ˆåŠ é€Ÿåº¦ (åŸºç¡€å€¼)<br>a_idm_base = a_max * (free_flow_term + braking_term)<br></code></pre></td></tr></tbody></table></figure>
<h3><span id="%E6%AD%A5%E9%AA%A4-4%E9%99%90%E5%88%B6%E8%BE%93%E5%87%BA%E5%8A%A0%E9%80%9F%E5%BA%A6">æ­¥éª¤ 4ï¼šé™åˆ¶è¾“å‡ºåŠ é€Ÿåº¦</span></h3>
<p>è®¡ç®—å‡ºçš„ $a_{\text{IDM}}$ å¿…é¡»é™åˆ¶åœ¨ç‰©ç†å’Œèˆ’é€‚æ€§èŒƒå›´ä¹‹å†…ã€‚</p>
<p>$$a_{\text{final}} = \text{clip}(a_{\text{IDM}}, -b_{\text{max}}, a_{\text{max}})$$</p>
<h2><span id="%E7%A4%BA%E4%BE%8B%E4%BC%AA%E4%BB%A3%E7%A0%81">ç¤ºä¾‹ä¼ªä»£ç </span></h2>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰ IDM æ¨¡å‹çš„å‚æ•°ç»“æ„ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">IDM_Parameters</span> {<br>    <span class="hljs-comment">// è‡ªç”±æµå‚æ•°</span><br>    <span class="hljs-type">double</span> a_max;       <span class="hljs-comment">// æœ€å¤§èˆ’é€‚åŠ é€Ÿåº¦ [m/s^2]</span><br>    <span class="hljs-type">double</span> v0;          <span class="hljs-comment">// æœŸæœ›æœ€å¤§é€Ÿåº¦ [m/s]</span><br>    <span class="hljs-type">double</span> delta;       <span class="hljs-comment">// åŠ é€Ÿåº¦æŒ‡æ•° (é€šå¸¸ä¸º 4)</span><br>    <br>    <span class="hljs-comment">// è·Ÿè½¦å‚æ•°</span><br>    <span class="hljs-type">double</span> s0;          <span class="hljs-comment">// é™æ­¢å®‰å…¨è·ç¦» [m]</span><br>    <span class="hljs-type">double</span> T;           <span class="hljs-comment">// æœŸæœ›æ—¶è· (Time Headway) [s]</span><br>    <span class="hljs-type">double</span> b_max;       <span class="hljs-comment">// æœ€å¤§èˆ’é€‚å‡é€Ÿåº¦ [m/s^2]</span><br>};<br><br><span class="hljs-comment">// æ™ºèƒ½é©¾é©¶å‘˜æ¨¡å‹ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelligentDriverModel</span> {<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–æ¨¡å‹å‚æ•°</span><br>    <span class="hljs-built_in">IntelligentDriverModel</span>(<span class="hljs-type">const</span> IDM_Parameters&amp; params) : <span class="hljs-built_in">params_</span>(params) {}<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * @brief è®¡ç®—è‡ªè½¦çš„æœŸæœ›åŠ é€Ÿåº¦ a_IDM</span><br><span class="hljs-comment">     * * @param v_ego è‡ªè½¦å½“å‰é€Ÿåº¦ [m/s]</span><br><span class="hljs-comment">     * @param v_front å‰è½¦å½“å‰é€Ÿåº¦ [m/s]</span><br><span class="hljs-comment">     * @param s_gap è‡ªè½¦ä¸å‰è½¦çš„å‡€è· (å®é™…è·ç¦») [m]</span><br><span class="hljs-comment">     * @return double æœŸæœ›åŠ é€Ÿåº¦ [m/s^2]</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">calculate_acceleration</span><span class="hljs-params">(<span class="hljs-type">double</span> v_ego, <span class="hljs-type">double</span> v_front, <span class="hljs-type">double</span> s_gap)</span> <span class="hljs-type">const</span> </span>{<br>        <span class="hljs-comment">// é˜²æ­¢é™¤ä»¥é›¶æˆ–å…¶ä»–æ•°å€¼é—®é¢˜ï¼Œç¡®ä¿é€Ÿåº¦å’Œè·ç¦»æ˜¯åˆç†çš„æ­£å€¼</span><br>        v_ego = std::<span class="hljs-built_in">max</span>(v_ego, <span class="hljs-number">0.0</span>);<br>        s_gap = std::<span class="hljs-built_in">max</span>(s_gap, <span class="hljs-number">0.1</span>); <span class="hljs-comment">// ä¿æŒæœ€å°è·ç¦»é¿å…é™¤é›¶</span><br><br>        <span class="hljs-comment">// æ­¥éª¤ 1: è®¡ç®—ç›¸å¯¹é€Ÿåº¦ v_rel (æ­£å€¼è¡¨ç¤ºæ¥è¿‘å‰è½¦)</span><br>        <span class="hljs-type">double</span> v_rel = v_ego - v_front;<br><br>        <span class="hljs-comment">// æ­¥éª¤ 2: è®¡ç®—åŠ¨æ€æœŸæœ›å®‰å…¨è·ç¦» s*</span><br>        <span class="hljs-comment">// s* = s0 + v * T + (v * v_rel) / (2 * sqrt(a_max * b_max))</span><br>        <br>        <span class="hljs-comment">// è®¡ç®—åŠ¨æ€åˆ¶åŠ¨é¡¹çš„åˆ†æ¯</span><br>        <span class="hljs-type">double</span> denom = <span class="hljs-number">2.0</span> * std::<span class="hljs-built_in">sqrt</span>(params_.a_max * params_.b_max);<br>        <br>        <span class="hljs-comment">// ç›¸å¯¹é€Ÿåº¦é¡¹</span><br>        <span class="hljs-type">double</span> dynamic_term = (v_ego * v_rel) / denom;<br><br>        <span class="hljs-comment">// æœŸæœ›å®‰å…¨è·ç¦» s_star</span><br>        <span class="hljs-type">double</span> s_star = params_.s0 + params_.T * v_ego + dynamic_term;<br><br>        <span class="hljs-comment">// æ­¥éª¤ 3: è®¡ç®— IDM åŸºç¡€åŠ é€Ÿåº¦ a_IDM_base</span><br>        <br>        <span class="hljs-comment">// 3.1 è‡ªç”±æµåŠ é€Ÿåº¦é¡¹ (Free-Driving Term)</span><br>        <span class="hljs-type">double</span> free_flow_term;<br>        <span class="hljs-keyword">if</span> (params_.v0 &gt; <span class="hljs-number">1e-6</span>) {<br>            free_flow_term = <span class="hljs-number">1.0</span> - std::<span class="hljs-built_in">pow</span>(v_ego / params_.v0, params_.delta);<br>        } <span class="hljs-keyword">else</span> {<br>            <span class="hljs-comment">// æœŸæœ›é€Ÿåº¦ä¸ºé›¶ï¼Œä¿æŒæœ€å¤§åŠ é€Ÿåº¦ (æˆ–æ ¹æ®å®é™…éœ€æ±‚è®¾ç½®ä¸ºé›¶)</span><br>            free_flow_term = <span class="hljs-number">1.0</span>; <br>        }<br><br>        <span class="hljs-comment">// 3.2 è·Ÿè½¦åˆ¶åŠ¨é¡¹ (Braking Term)</span><br>        <span class="hljs-comment">// ä½¿ç”¨å®é™…è·ç¦» s_gap å’ŒæœŸæœ›è·ç¦» s_star</span><br>        <span class="hljs-type">double</span> braking_term = -std::<span class="hljs-built_in">pow</span>(s_star / s_gap, <span class="hljs-number">2.0</span>);<br><br>        <span class="hljs-comment">// 3.3 æœ€ç»ˆåŠ é€Ÿåº¦ (åŸºç¡€å€¼)</span><br>        <span class="hljs-type">double</span> a_idm_base = params_.a_max * (free_flow_term + braking_term);<br><br>        <span class="hljs-comment">// æ­¥éª¤ 4: é™åˆ¶è¾“å‡ºåŠ é€Ÿåº¦åœ¨èˆ’é€‚èŒƒå›´ [-b_max, a_max] å†…</span><br>        <span class="hljs-comment">// åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¦‚æœ IDM æ¨¡å‹è®¡ç®—å‡ºä½äº -b_max çš„åŠ é€Ÿåº¦ï¼Œé€šå¸¸æ„å‘³ç€éœ€è¦ç´§æ€¥åˆ¶åŠ¨ã€‚</span><br>        <span class="hljs-comment">// ä½† IDM æœ¬èº«æ˜¯è®¾è®¡ä¸ºèˆ’é€‚çš„ï¼Œæ‰€ä»¥ç›´æ¥ clip å³å¯ã€‚</span><br>        <span class="hljs-type">double</span> a_final = std::<span class="hljs-built_in">max</span>(-params_.b_max, a_idm_base);<br>        a_final = std::<span class="hljs-built_in">min</span>(params_.a_max, a_final);<br>        <br>        <span class="hljs-keyword">return</span> a_final;<br>    }<br><br><span class="hljs-keyword">private</span>:<br>    IDM_Parameters params_;<br>};<br><br><span class="hljs-comment">// --- ç¤ºä¾‹ç”¨æ³• ---</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">main_example</span><span class="hljs-params">()</span> </span>{<br>    IDM_Parameters default_params = {<br>        <span class="hljs-number">1.5</span>,   <span class="hljs-comment">// a_max (m/s^2)</span><br>        <span class="hljs-number">30.0</span>,  <span class="hljs-comment">// v0 (m/s)</span><br>        <span class="hljs-number">4.0</span>,   <span class="hljs-comment">// delta</span><br>        <span class="hljs-number">2.0</span>,   <span class="hljs-comment">// s0 (m)</span><br>        <span class="hljs-number">1.5</span>,   <span class="hljs-comment">// T (s)</span><br>        <span class="hljs-number">3.0</span>    <span class="hljs-comment">// b_max (m/s^2)</span><br>    };<br><br>    <span class="hljs-function">IntelligentDriverModel <span class="hljs-title">idm</span><span class="hljs-params">(default_params)</span></span>;<br><br>    <span class="hljs-comment">// åœºæ™¯: è‡ªè½¦ 15 m/s æ¥è¿‘ 13 m/s çš„å‰è½¦ï¼Œè·ç¦» 20 m</span><br>    <span class="hljs-type">double</span> v_ego = <span class="hljs-number">15.0</span>;<br>    <span class="hljs-type">double</span> v_front = <span class="hljs-number">13.0</span>;<br>    <span class="hljs-type">double</span> s_gap = <span class="hljs-number">20.0</span>;<br><br>    <span class="hljs-type">double</span> acceleration = idm.<span class="hljs-built_in">calculate_acceleration</span>(v_ego, v_front, s_gap);<br><br>    <span class="hljs-comment">// è¾“å‡ºç»“æœ</span><br>    <span class="hljs-comment">// ...</span><br>}<br></code></pre></td></tr></tbody></table></figure>
<h1><span id="%E8%BF%90%E5%8A%A8%E5%AD%A6%E8%87%AA%E8%A1%8C%E8%BD%A6%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%89%8D%E5%90%91%E4%BB%BF%E7%9C%9F">è¿åŠ¨å­¦è‡ªè¡Œè½¦æ¨¡å‹çš„å‰å‘ä»¿çœŸ</span></h1>
<h2><span id="%F0%9F%9A%B2-%E8%BF%90%E5%8A%A8%E5%AD%A6%E8%87%AA%E8%A1%8C%E8%BD%A6%E6%A8%A1%E5%9E%8B-kinematic-bicycle-model">ğŸš² è¿åŠ¨å­¦è‡ªè¡Œè½¦æ¨¡å‹ (Kinematic Bicycle Model)</span></h2>
<p>æ¨¡å‹å®šä¹‰è½¦è¾†çŠ¶æ€ $S$ å’Œæ§åˆ¶è¾“å…¥ $U$:</p>
<p><strong>çŠ¶æ€ $S$:</strong></p>
<p>$$S = [x, y, \psi, v]^{\text{T}}$$
$x, y$: åè½´ä¸­å¿ƒçš„ä¸–ç•Œåæ ‡ã€‚
$\psi$ (yaw): è½¦è¾†çš„èˆªå‘è§’ï¼ˆç›¸å¯¹äº $x$ è½´ï¼‰ã€‚
$v$: è½¦è¾†çš„çºµå‘é€Ÿåº¦ã€‚</p>
<p><strong>æ§åˆ¶è¾“å…¥ $U$:</strong></p>
<p>$$U = [a, \delta]^{\text{T}}$$
$a$ (acceleration): çºµå‘åŠ é€Ÿåº¦ã€‚
$\delta$ (steering_angle): å‰è½®è½¬å‘è§’ã€‚</p>
<h2><span id="%E8%BF%90%E5%8A%A8%E5%AD%A6%E6%96%B9%E7%A8%8B">è¿åŠ¨å­¦æ–¹ç¨‹</span></h2>
<p>è½¦è¾†çŠ¶æ€éšæ—¶é—´å˜åŒ–çš„ä¸€é˜¶å¾®åˆ†æ–¹ç¨‹å¦‚ä¸‹ï¼š</p>
<p>$$\begin{align*} \dot{x} &amp;= v \cos(\psi) \\ \dot{y} &amp;= v \sin(\psi) \\ \dot{\psi} &amp;= \frac{v}{L} \tan(\delta) \\ \dot{v} &amp;= a \end{align*}$$</p>
<p>å…¶ä¸­ $L$ æ˜¯è½´è·ï¼ˆWheelbaseï¼‰ã€‚</p>
<p>çŸ¥é“ $x_t$ï¼Œè¦å¾—åˆ° $x_{t+1}$ï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿ
çŠ¶æ€çš„å¯¼æ•°æ–¹ç¨‹æˆ‘ä»¬å·²ç»çŸ¥é“$\dot{S} = [\dot{x}, \dot{y}, \dot{\psi}, \dot{v}]^{\text{T}}$</p>
<h3><span id="%E6%AC%A7%E6%8B%89%E6%B3%95%E5%89%8D%E5%90%91%E7%A7%AF%E5%88%86">æ¬§æ‹‰æ³•å‰å‘ç§¯åˆ†</span></h3>
<p>æ¬§æ‹‰æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯åˆ©ç”¨æ³°å‹’çº§æ•°å±•å¼€çš„ä¸€é˜¶è¿‘ä¼¼ï¼Œå‡è®¾åœ¨å¾ˆçŸ­çš„æ—¶é—´æ­¥é•¿ $\Delta t$ å†…ï¼ŒçŠ¶æ€çš„å˜åŒ–ç‡ï¼ˆå¯¼æ•°ï¼‰$\dot{S}(t_k)$ ä¿æŒä¸å˜ã€‚</p>
<p>æ­¤æ—¶</p>
<p>$$S(t_{k+1}) \approx S(t_k) + \text{Slope} \cdot (t_{k+1} - t_k)$$</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// çŠ¶æ€ç»“æ„ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">State</span> {<br>    <span class="hljs-type">double</span> x;         <span class="hljs-comment">// x åæ ‡ (m)</span><br>    <span class="hljs-type">double</span> y;         <span class="hljs-comment">// y åæ ‡ (m)</span><br>    <span class="hljs-type">double</span> yaw;       <span class="hljs-comment">// èˆªå‘è§’ (rad)</span><br>    <span class="hljs-type">double</span> v;         <span class="hljs-comment">// é€Ÿåº¦ (m/s)</span><br>};<br><br><span class="hljs-comment">// æ§åˆ¶è¾“å…¥ç»“æ„ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ControlInput</span> {<br>    <span class="hljs-type">double</span> acceleration;  <span class="hljs-comment">// åŠ é€Ÿåº¦ a (m/s^2)</span><br>    <span class="hljs-type">double</span> steering_angle; <span class="hljs-comment">// å‰è½®è½¬å‘è§’ delta (rad)</span><br>};<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">KinematicBicycleModel</span> {<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">const</span> <span class="hljs-type">double</span> L; <span class="hljs-comment">// è½´è· (Wheelbase) [m]</span><br><br>    <span class="hljs-built_in">KinematicBicycleModel</span>(<span class="hljs-type">double</span> wheelbase) : <span class="hljs-built_in">L</span>(wheelbase) {}<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * @brief ä½¿ç”¨æ¬§æ‹‰æ³•è®¡ç®—ä¸‹ä¸€æ—¶åˆ»çŠ¶æ€ S_{t+1}</span><br><span class="hljs-comment">     * * @param current_state å½“å‰æ—¶åˆ»çš„çŠ¶æ€ S_t</span><br><span class="hljs-comment">     * @param input_u æ§åˆ¶è¾“å…¥ U_t</span><br><span class="hljs-comment">     * @param dt ä»¿çœŸæ—¶é—´æ­¥é•¿ (s)</span><br><span class="hljs-comment">     * @return State ä¸‹ä¸€æ—¶åˆ»çš„çŠ¶æ€ S_{t+1}</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">State <span class="hljs-title">predict_euler</span><span class="hljs-params">(<span class="hljs-type">const</span> State&amp; current_state, <span class="hljs-type">const</span> ControlInput&amp; input_u, <span class="hljs-type">double</span> dt)</span> <span class="hljs-type">const</span> </span>{<br>        <span class="hljs-comment">// --- 1. è®¡ç®—å½“å‰æ—¶åˆ»çš„çŠ¶æ€å¯¼æ•° (S_dot) ---</span><br><br>        <span class="hljs-comment">// x_dot = v * cos(yaw)</span><br>        <span class="hljs-type">double</span> x_dot = current_state.v * std::<span class="hljs-built_in">cos</span>(current_state.yaw);<br><br>        <span class="hljs-comment">// y_dot = v * sin(yaw)</span><br>        <span class="hljs-type">double</span> y_dot = current_state.v * std::<span class="hljs-built_in">sin</span>(current_state.yaw);<br><br>        <span class="hljs-comment">// yaw_dot = (v / L) * tan(delta)</span><br>        <span class="hljs-type">double</span> yaw_dot = <span class="hljs-number">0.0</span>;<br>        <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">abs</span>(L) &gt; <span class="hljs-number">1e-6</span>) { <span class="hljs-comment">// é¿å…é™¤ä»¥é›¶</span><br>            yaw_dot = (current_state.v / L) * std::<span class="hljs-built_in">tan</span>(input_u.steering_angle);<br>        }<br>        <br>        <span class="hljs-comment">// v_dot = a</span><br>        <span class="hljs-type">double</span> v_dot = input_u.acceleration;<br><br><br>        <span class="hljs-comment">// --- 2. ä½¿ç”¨æ¬§æ‹‰æ³•ç§¯åˆ† S_{t+1} = S_t + S_dot * dt ---</span><br>        State next_state;<br><br>        next_state.x = current_state.x + x_dot * dt;<br>        next_state.y = current_state.y + y_dot * dt;<br>        <br>        <span class="hljs-comment">// ç§¯åˆ†èˆªå‘è§’</span><br>        next_state.yaw = current_state.yaw + yaw_dot * dt; <br>        <br>        <span class="hljs-comment">// ç§¯åˆ†é€Ÿåº¦</span><br>        next_state.v = current_state.v + v_dot * dt;<br><br>        <span class="hljs-comment">// --- 3. çŠ¶æ€çº¦æŸä¸å½’ä¸€åŒ– ---</span><br>        <br>        <span class="hljs-comment">// ç¡®ä¿é€Ÿåº¦ä¸å°äº 0 (ç‰©ç†é™åˆ¶)</span><br>        next_state.v = std::<span class="hljs-built_in">max</span>(<span class="hljs-number">0.0</span>, next_state.v);<br><br>        <span class="hljs-comment">// å½’ä¸€åŒ–èˆªå‘è§’åˆ° [-PI, PI]</span><br>        next_state.yaw = <span class="hljs-built_in">normalize_angle</span>(next_state.yaw);<br><br>        <span class="hljs-keyword">return</span> next_state;<br>    }<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * @brief å½’ä¸€åŒ–è§’åº¦åˆ° [-PI, PI] èŒƒå›´</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">normalize_angle</span><span class="hljs-params">(<span class="hljs-type">double</span> angle)</span> <span class="hljs-type">const</span> </span>{<br>        <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„è§’åº¦å½’ä¸€åŒ–å®ç°</span><br>        angle = std::<span class="hljs-built_in">fmod</span>(angle + M_PI, <span class="hljs-number">2.0</span> * M_PI);<br>        <span class="hljs-keyword">if</span> (angle &lt; <span class="hljs-number">0</span>) {<br>            angle += <span class="hljs-number">2.0</span> * M_PI;<br>        }<br>        <span class="hljs-keyword">return</span> angle - M_PI;<br>    }<br>};<br><br><span class="hljs-comment">// --- ç¤ºä¾‹ç”¨æ³• ---</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">main_example</span><span class="hljs-params">()</span> </span>{<br>    <span class="hljs-comment">// å‡è®¾è½´è· L = 2.8 m</span><br>    <span class="hljs-function">KinematicBicycleModel <span class="hljs-title">model</span><span class="hljs-params">(<span class="hljs-number">2.8</span>)</span></span>;<br>    <span class="hljs-type">double</span> dt = <span class="hljs-number">0.1</span>; <span class="hljs-comment">// 100 ms é‡‡æ ·æ—¶é—´</span><br><br>    State current_state = {<br>        <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>,           <span class="hljs-comment">// åˆå§‹ä½ç½® (0, 0)</span><br>        M_PI / <span class="hljs-number">4</span>,           <span class="hljs-comment">// åˆå§‹èˆªå‘è§’ 45åº¦</span><br>        <span class="hljs-number">5.0</span>                 <span class="hljs-comment">// åˆå§‹é€Ÿåº¦ 5 m/s</span><br>    };<br><br>    ControlInput input_u = {<br>        <span class="hljs-number">0.5</span>,                <span class="hljs-comment">// åŠ é€Ÿåº¦ 0.5 m/s^2 </span><br>        <span class="hljs-number">0.1745</span>              <span class="hljs-comment">// è½¬å‘è§’ 10åº¦ (å·¦è½¬)</span><br>    };<br><br>    std::cout &lt;&lt; <span class="hljs-string">"åˆå§‹çŠ¶æ€: x="</span> &lt;&lt; current_state.x &lt;&lt; <span class="hljs-string">", y="</span> &lt;&lt; current_state.y <br>              &lt;&lt; <span class="hljs-string">", yaw="</span> &lt;&lt; current_state.yaw &lt;&lt; <span class="hljs-string">", v="</span> &lt;&lt; current_state.v &lt;&lt; std::endl;<br><br>    <span class="hljs-comment">// ä»¿çœŸ 10 æ­¥ (1ç§’)</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; ++i) {<br>        current_state = model.<span class="hljs-built_in">predict_euler</span>(current_state, input_u, dt);<br>    }<br><br>    std::cout &lt;&lt; <span class="hljs-string">"1ç§’åçŠ¶æ€: x="</span> &lt;&lt; current_state.x &lt;&lt; <span class="hljs-string">", y="</span> &lt;&lt; current_state.y <br>              &lt;&lt; <span class="hljs-string">", yaw="</span> &lt;&lt; current_state.yaw &lt;&lt; <span class="hljs-string">", v="</span> &lt;&lt; current_state.v &lt;&lt; std::endl;<br>}<br></code></pre></td></tr></tbody></table></figure>
<h3><span id="%E5%9B%9B%E9%98%B6%E9%BE%99%E6%A0%BC-%E5%BA%93%E5%A1%94%E6%B3%95rk4%E7%A7%AF%E5%88%86">å››é˜¶é¾™æ ¼-åº“å¡”æ³•ï¼ˆRK4ï¼‰ç§¯åˆ†</span></h3>
<p>æ¯”æ¬§æ‹‰æ³•ç²¾åº¦é«˜å¾—å¤šã€‚å››é˜¶æ–¹æ³•ï¼Œæ„å‘³ç€å…¶å±€éƒ¨è¯¯å·®ä¸ $(\Delta t)^5$ æˆæ­£æ¯”ï¼Œå…¨å±€è¯¯å·®ä¸ $(\Delta t)^4$ æˆæ­£æ¯”ã€‚</p>
<h4><span id="%E7%A7%AF%E5%88%86%E6%AD%A5%E9%AA%A4">ç§¯åˆ†æ­¥éª¤</span></h4>
<p><strong>1.ç®—å››ä¸ªæ–œç‡</strong> $k_1, k_2, k_3, k_4$</p>
<p>$$\begin{align*} k_1 &amp;= f(S_k, U_k) \\ k_2 &amp;= f\left( S_k + k_1 \frac{\Delta t}{2}, U_k \right) \\ k_3 &amp;= f\left( S_k + k_2 \frac{\Delta t}{2}, U_k \right) \\ k_4 &amp;= f\left( S_k + k_3 \Delta t, U_k \right) \end{align*}$$</p>
<p><strong>2.è®¡ç®—åŠ æƒå¹³å‡å˜åŒ–ç‡</strong></p>
<p>å››ä¸ªæ–œç‡æŒ‰ç…§ $1:2:2:1$ çš„æ¯”ä¾‹åŠ æƒå¹³å‡ï¼š</p>
<p>$$\dot{S}\\_{\text{avg}} = \frac{1}{6} (k\\_1 + 2k\\_2 + 2k\\_3 + k\\_4)$$</p>
<p><strong>3.æ›´æ–°çŠ¶æ€</strong></p>
<p>$$S_{k+1} = S_k + \dot{S}_{\text{avg}} \cdot \Delta t$$</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰ PI å¸¸é‡</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> M_PI</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> M_PI 3.14159265358979323846</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-comment">// --- 1. çŠ¶æ€å’Œè¾“å…¥ç»“æ„ä½“ ---</span><br><br><span class="hljs-comment">// è½¦è¾†å½“å‰çŠ¶æ€</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">State</span> {<br>    <span class="hljs-type">double</span> x;         <span class="hljs-comment">// x åæ ‡ (m)</span><br>    <span class="hljs-type">double</span> y;         <span class="hljs-comment">// y åæ ‡ (m)</span><br>    <span class="hljs-type">double</span> yaw;       <span class="hljs-comment">// èˆªå‘è§’ (rad)</span><br>    <span class="hljs-type">double</span> v;         <span class="hljs-comment">// é€Ÿåº¦ (m/s)</span><br>};<br><br><span class="hljs-comment">// æ§åˆ¶è¾“å…¥</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ControlInput</span> {<br>    <span class="hljs-type">double</span> acceleration;  <span class="hljs-comment">// åŠ é€Ÿåº¦ a (m/s^2)</span><br>    <span class="hljs-type">double</span> steering_angle; <span class="hljs-comment">// å‰è½®è½¬å‘è§’ delta (rad)</span><br>};<br><br><span class="hljs-comment">// çŠ¶æ€å¯¼æ•° (S_dot)</span><br><span class="hljs-comment">// æ³¨æ„ï¼šè¯¥ç»“æ„ä½“ä¸ State ç»“æ„ä½“å…·æœ‰ç›¸åŒçš„æˆå‘˜ï¼Œä½†å­˜å‚¨çš„æ˜¯å˜åŒ–ç‡</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">StateDerivative</span> {<br>    <span class="hljs-type">double</span> x_dot;<br>    <span class="hljs-type">double</span> y_dot;<br>    <span class="hljs-type">double</span> yaw_dot;<br>    <span class="hljs-type">double</span> v_dot;<br>};<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">KinematicBicycleModelRK4</span> {<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">const</span> <span class="hljs-type">double</span> L; <span class="hljs-comment">// è½´è· (Wheelbase) [m]</span><br><br>    <span class="hljs-built_in">KinematicBicycleModelRK4</span>(<span class="hljs-type">double</span> wheelbase) : <span class="hljs-built_in">L</span>(wheelbase) {}<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * @brief ä½¿ç”¨å››é˜¶é¾™æ ¼-åº“å¡”æ³• (RK4) è®¡ç®—ä¸‹ä¸€æ—¶åˆ»çŠ¶æ€ S_{t+1}</span><br><span class="hljs-comment">     * @param current_state å½“å‰æ—¶åˆ»çš„çŠ¶æ€ S_t</span><br><span class="hljs-comment">     * @param input_u æ§åˆ¶è¾“å…¥ U_t</span><br><span class="hljs-comment">     * @param dt ä»¿çœŸæ—¶é—´æ­¥é•¿ (s)</span><br><span class="hljs-comment">     * @return State ä¸‹ä¸€æ—¶åˆ»çš„çŠ¶æ€ S_{t+1}</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">State <span class="hljs-title">predict_rk4</span><span class="hljs-params">(<span class="hljs-type">const</span> State&amp; current_state, <span class="hljs-type">const</span> ControlInput&amp; input_u, <span class="hljs-type">double</span> dt)</span> <span class="hljs-type">const</span> </span>{<br>        <span class="hljs-comment">// --- 1. è®¡ç®—å››ä¸ªæ–œç‡ K1, K2, K3, K4 ---</span><br>        <br>        <span class="hljs-comment">// K1 = f(S_t, U_t)</span><br>        StateDerivative k1 = <span class="hljs-built_in">calculate_s_dot</span>(current_state, input_u);<br><br>        <span class="hljs-comment">// K2 = f(S_t + k1 * (dt/2), U_t)</span><br>        State s_temp1 = <span class="hljs-built_in">add_state_derivative</span>(current_state, k1, dt / <span class="hljs-number">2.0</span>);<br>        StateDerivative k2 = <span class="hljs-built_in">calculate_s_dot</span>(s_temp1, input_u);<br><br>        <span class="hljs-comment">// K3 = f(S_t + k2 * (dt/2), U_t)</span><br>        State s_temp2 = <span class="hljs-built_in">add_state_derivative</span>(current_state, k2, dt / <span class="hljs-number">2.0</span>);<br>        StateDerivative k3 = <span class="hljs-built_in">calculate_s_dot</span>(s_temp2, input_u);<br><br>        <span class="hljs-comment">// K4 = f(S_t + k3 * dt, U_t)</span><br>        State s_temp3 = <span class="hljs-built_in">add_state_derivative</span>(current_state, k3, dt);<br>        StateDerivative k4 = <span class="hljs-built_in">calculate_s_dot</span>(s_temp3, input_u);<br><br>        <span class="hljs-comment">// --- 2. è®¡ç®—åŠ æƒå¹³å‡å˜åŒ–ç‡ S_dot_avg ---</span><br>        <span class="hljs-comment">// S_dot_avg = (k1 + 2*k2 + 2*k3 + k4) / 6</span><br>        StateDerivative s_dot_avg;<br>        s_dot_avg.x_dot = (k1.x_dot + <span class="hljs-number">2.0</span> * k2.x_dot + <span class="hljs-number">2.0</span> * k3.x_dot + k4.x_dot) / <span class="hljs-number">6.0</span>;<br>        s_dot_avg.y_dot = (k1.y_dot + <span class="hljs-number">2.0</span> * k2.y_dot + <span class="hljs-number">2.0</span> * k3.y_dot + k4.y_dot) / <span class="hljs-number">6.0</span>;<br>        s_dot_avg.yaw_dot = (k1.yaw_dot + <span class="hljs-number">2.0</span> * k2.yaw_dot + <span class="hljs-number">2.0</span> * k3.yaw_dot + k4.yaw_dot) / <span class="hljs-number">6.0</span>;<br>        s_dot_avg.v_dot = (k1.v_dot + <span class="hljs-number">2.0</span> * k2.v_dot + <span class="hljs-number">2.0</span> * k3.v_dot + k4.v_dot) / <span class="hljs-number">6.0</span>;<br><br>        <span class="hljs-comment">// --- 3. æ›´æ–°çŠ¶æ€ S_{t+1} = S_t + S_dot_avg * dt ---</span><br>        State next_state = <span class="hljs-built_in">add_state_derivative</span>(current_state, s_dot_avg, dt);<br><br>        <span class="hljs-comment">// --- 4. çŠ¶æ€çº¦æŸä¸å½’ä¸€åŒ– ---</span><br>        next_state.v = std::<span class="hljs-built_in">max</span>(<span class="hljs-number">0.0</span>, next_state.v);<br>        next_state.yaw = <span class="hljs-built_in">normalize_angle</span>(next_state.yaw);<br><br>        <span class="hljs-keyword">return</span> next_state;<br>    }<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-comment">// --- è¾…åŠ©å‡½æ•° ---</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * @brief çŠ¶æ€å¯¼æ•°å‡½æ•° f(S, U)ï¼šè®¡ç®—å½“å‰çŠ¶æ€ S çš„å˜åŒ–ç‡ S_dot</span><br><span class="hljs-comment">     * Kinematic Bicycle Model æ–¹ç¨‹</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">StateDerivative <span class="hljs-title">calculate_s_dot</span><span class="hljs-params">(<span class="hljs-type">const</span> State&amp; s, <span class="hljs-type">const</span> ControlInput&amp; u)</span> <span class="hljs-type">const</span> </span>{<br>        StateDerivative s_dot;<br>        <br>        <span class="hljs-comment">// é¿å…é™¤ä»¥é›¶</span><br>        <span class="hljs-type">const</span> <span class="hljs-type">double</span> L_safe = (std::<span class="hljs-built_in">abs</span>(L) &gt; <span class="hljs-number">1e-6</span>) ? L : <span class="hljs-number">1e-6</span>; <br><br>        <span class="hljs-comment">// x_dot = v * cos(yaw)</span><br>        s_dot.x_dot = s.v * std::<span class="hljs-built_in">cos</span>(s.yaw);<br><br>        <span class="hljs-comment">// y_dot = v * sin(yaw)</span><br>        s_dot.y_dot = s.v * std::<span class="hljs-built_in">sin</span>(s.yaw);<br><br>        <span class="hljs-comment">// yaw_dot = (v / L) * tan(delta)</span><br>        s_dot.yaw_dot = (s.v / L_safe) * std::<span class="hljs-built_in">tan</span>(u.steering_angle);<br>        <br>        <span class="hljs-comment">// v_dot = a</span><br>        s_dot.v_dot = u.acceleration;<br><br>        <span class="hljs-keyword">return</span> s_dot;<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * @brief è®¡ç®—ä¸´æ—¶çŠ¶æ€ï¼š S_temp = S_current + S_dot * delta_t</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function">State <span class="hljs-title">add_state_derivative</span><span class="hljs-params">(<span class="hljs-type">const</span> State&amp; s, <span class="hljs-type">const</span> StateDerivative&amp; s_dot, <span class="hljs-type">double</span> <span class="hljs-type">delta_t</span>)</span> <span class="hljs-type">const</span> </span>{<br>        State s_new;<br>        s_new.x = s.x + s_dot.x_dot * <span class="hljs-type">delta_t</span>;<br>        s_new.y = s.y + s_dot.y_dot * <span class="hljs-type">delta_t</span>;<br>        s_new.yaw = s.yaw + s_dot.yaw_dot * <span class="hljs-type">delta_t</span>;<br>        s_new.v = s.v + s_dot.v_dot * <span class="hljs-type">delta_t</span>;<br>        <br>        <span class="hljs-comment">// åœ¨è®¡ç®— RK4 çš„ä¸­é—´çŠ¶æ€æ—¶ï¼Œé€Ÿåº¦ä¹Ÿåº”ä¿è¯éè´Ÿ</span><br>        s_new.v = std::<span class="hljs-built_in">max</span>(<span class="hljs-number">0.0</span>, s_new.v); <br>        <span class="hljs-keyword">return</span> s_new;<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * @brief å½’ä¸€åŒ–è§’åº¦åˆ° [-PI, PI] èŒƒå›´</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">normalize_angle</span><span class="hljs-params">(<span class="hljs-type">double</span> angle)</span> <span class="hljs-type">const</span> </span>{<br>        <span class="hljs-comment">// ä½¿ç”¨æ ‡å‡†åº“å‡½æ•°è¿›è¡Œå½’ä¸€åŒ–</span><br>        angle = std::<span class="hljs-built_in">fmod</span>(angle + M_PI, <span class="hljs-number">2.0</span> * M_PI);<br>        <span class="hljs-keyword">if</span> (angle &lt; <span class="hljs-number">0</span>) {<br>            angle += <span class="hljs-number">2.0</span> * M_PI;<br>        }<br>        <span class="hljs-keyword">return</span> angle - M_PI;<br>    }<br>};<br><br><span class="hljs-comment">// --- ç¤ºä¾‹ç”¨æ³• ---</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{<br>    <span class="hljs-comment">// å‡è®¾è½´è· L = 2.8 m</span><br>    <span class="hljs-function">KinematicBicycleModelRK4 <span class="hljs-title">model</span><span class="hljs-params">(<span class="hljs-number">2.8</span>)</span></span>;<br>    <span class="hljs-type">double</span> dt = <span class="hljs-number">0.1</span>; <span class="hljs-comment">// 100 ms é‡‡æ ·æ—¶é—´</span><br><br>    State current_state = {<br>        <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>,           <span class="hljs-comment">// åˆå§‹ä½ç½® (0, 0)</span><br>        M_PI / <span class="hljs-number">4</span>,           <span class="hljs-comment">// åˆå§‹èˆªå‘è§’ 45åº¦</span><br>        <span class="hljs-number">5.0</span>                 <span class="hljs-comment">// åˆå§‹é€Ÿåº¦ 5 m/s</span><br>    };<br><br>    ControlInput input_u = {<br>        <span class="hljs-number">0.5</span>,                <span class="hljs-comment">// åŠ é€Ÿåº¦ 0.5 m/s^2 </span><br>        <span class="hljs-number">0.1745</span>              <span class="hljs-comment">// è½¬å‘è§’ 10åº¦ (å·¦è½¬)</span><br>    };<br><br>    std::cout &lt;&lt; <span class="hljs-string">"--- RK4 è¿åŠ¨å­¦æ¨¡å‹ä»¿çœŸ ---"</span> &lt;&lt; std::endl;<br>    std::cout &lt;&lt; <span class="hljs-string">"åˆå§‹çŠ¶æ€: x="</span> &lt;&lt; current_state.x &lt;&lt; <span class="hljs-string">", y="</span> &lt;&lt; current_state.y <br>              &lt;&lt; <span class="hljs-string">", yaw="</span> &lt;&lt; current_state.yaw &lt;&lt; <span class="hljs-string">" rad, v="</span> &lt;&lt; current_state.v &lt;&lt; <span class="hljs-string">" m/s"</span> &lt;&lt; std::endl;<br><br>    <span class="hljs-comment">// ä»¿çœŸ 10 æ­¥ (1ç§’)</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; ++i) {<br>        current_state = model.<span class="hljs-built_in">predict_rk4</span>(current_state, input_u, dt);<br>    }<br><br>    std::cout &lt;&lt; <span class="hljs-string">"\n1ç§’åçŠ¶æ€ (RK4):"</span> &lt;&lt; std::endl;<br>    std::cout &lt;&lt; <span class="hljs-string">"x="</span> &lt;&lt; current_state.x &lt;&lt; <span class="hljs-string">" m, y="</span> &lt;&lt; current_state.y &lt;&lt; <span class="hljs-string">" m"</span> &lt;&lt; std::endl;<br>    std::cout &lt;&lt; <span class="hljs-string">"yaw="</span> &lt;&lt; current_state.yaw &lt;&lt; <span class="hljs-string">" rad ("</span> &lt;&lt; current_state.yaw * <span class="hljs-number">180.0</span> / M_PI &lt;&lt; <span class="hljs-string">" deg)"</span> &lt;&lt; std::endl;<br>    std::cout &lt;&lt; <span class="hljs-string">"v="</span> &lt;&lt; current_state.v &lt;&lt; <span class="hljs-string">" m/s"</span> &lt;&lt; std::endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br><br></code></pre></td></tr></tbody></table></figure><!-- hexo injector body_end start -->
<!-- Mermaid Scripts -->
<script>
// æ£€æŸ¥é¡µé¢æ˜¯å¦åŒ…å«Mermaidå†…å®¹
const hasMermaid = document.querySelector('.mermaid') !== null;

// å¦‚æœå­˜åœ¨Mermaidå›¾è¡¨ï¼Œåˆ™åŠ è½½Mermaidåº“
if (hasMermaid) {
  // åŠ è½½Mermaidåº“
  const mermaidScript = document.createElement('script');
  mermaidScript.src = 'https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js';
  mermaidScript.onload = function() {
    mermaid.initialize({
      startOnLoad: true,
      theme: 'default',
      securityLevel: 'loose',
      fontFamily: 'inherit'
    });

    // é‡æ–°æ¸²æŸ“Mermaidå›¾è¡¨
    mermaid.init(undefined, '.mermaid');
  };
  document.head.appendChild(mermaidScript);
}
</script><!-- hexo injector body_end end --></body></html>
	</article>

	 
    <div class="kira-post-copyright">
        <strong>æœ¬æ–‡ä½œè€…ï¼š</strong>æˆ˜æ–—åŒ…å­<br>
        <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://paipai121.github.io/2025/11/18/%E5%B7%A5%E4%BD%9C/IDM%E6%A8%A1%E5%9E%8B/" title="https:&#x2F;&#x2F;paipai121.github.io&#x2F;2025&#x2F;11&#x2F;18&#x2F;å·¥ä½œ&#x2F;IDMæ¨¡å‹&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;paipai121.github.io&#x2F;2025&#x2F;11&#x2F;18&#x2F;å·¥ä½œ&#x2F;IDMæ¨¡å‹&#x2F;</a><br>
        
            <strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬æ–‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> åè®®è¿›è¡Œè®¸å¯
        
    </div>

  
	<div class="kira-post-nav">
		<nav class="post-nav">
			          
			<!-- å…ˆæ‰¾åˆ°ä¸å½“å‰æ–‡å­—ç›¸åŒçš„ç›®å½• -->
			                                                                                                                  
			<!-- åœ¨æ‰¾åˆ°å½“å‰æ–‡ç« æ‰€åœ¨çš„ index -->
			                                                                                                                                                    
			<!-- ä¸Šä¸€ç¯‡æ–‡ç«  -->
			<div class="old">
				<span>ä¸Šä¸€ç« </span>
				<a href="/2025/11/16/%E5%B7%A5%E4%BD%9C/DQN%E4%B8%8EDDNQ/"> DQNä¸DDNQ</a>
			</div>
			       
			<!-- ä¸‹ä¸€ç¯‡æ–‡ç«  -->
			<div class="new">
				<span>ä¸‹ä¸€ç« </span>
				<a href="/2025/11/19/%E5%B7%A5%E4%BD%9C/%E7%AB%AF%E5%88%B0%E7%AB%AF%E9%9D%A2%E8%AF%95%E5%89%8D%E7%9A%84%E4%B8%B4%E6%97%B6%E6%8A%B1%E4%BD%9B%E8%84%9A/"> ç«¯åˆ°ç«¯é¢è¯•å‰çš„ä¸´æ—¶æŠ±ä½›è„š</a>
			</div>
			                                                                          
		</nav>
	</div>
	
	<div class="kira-post-meta kira-rainbow">
		
			<a class="kirafont icon-container-fill -link" href="/categories/%E5%B7%A5%E4%BD%9C%E4%BD%93%E9%AA%8C/">å·¥ä½œä½“éªŒ</a>
		
		
			<a class="kirafont icon-tag-fill -none-link" href="/tags/%E6%B8%B8%E6%88%8F%E4%B8%9A%E4%BD%99%E5%BC%80%E5%8F%91/" rel="tag">æ¸¸æˆä¸šä½™å¼€å‘</a>
		
	</div>
	
	<div class="kira-post-footer">
		

		
	<div class="giscus"></div>
  
    <script src="https://giscus.app/client.js"
      data-repo="PaiPai121/discuss"
      data-repo-id="R_kgDOMFuZdw"
      data-category="Announcements"
      data-category-id="DIC_kwDOMFuZd84Cf5yz"
      data-mapping="pathname"
      data-strict="0"
      data-reactions-enabled="1"
      data-emit-metadata="0"
      data-input-position="top"
      data-theme="preferred_color_scheme"
      data-lang="zh-CN"
      data-loading="lazy"
      crossorigin="anonymous"
      async  
    ></script>
  

	</div>
	
</div>

				</div>
			</div>
			<div class="kira-right-column">
	<a onclick="document.querySelector('#kira-top-header').scrollIntoView({behavior: 'smooth'});" class="kira-backtotop" aria-label="å›åˆ°é¡¶éƒ¨" title="å›åˆ°é¡¶éƒ¨">
		<button class="mdui-fab mdui-ripple">
			<i class="kirafont icon-caret-up"></i>
		</button>
	</a>
</div>

		</div>
	</body>
</html>
